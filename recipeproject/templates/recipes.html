{% extends 'base.html' %}


{% block start %}

<div class="container mt-5" >

    <form class="col-6 mx-auto card p-3 shadow-lg" method="POST" enctype="multipart/form-data"> 
      {% csrf_token %}
      <h3>Add Recipe</h3>
        <div class="mb-3">
          <label for="exampleInputEmail1" class="form-label">Recipe Name</label>
          <input type="text" class="form-control" name="recipe_name"  id="exampleInputEmail1" aria-describedby="emailHelp">
         
        </div>
        <div class="mb-3">
          <label for="exampleInputPassword1"  class="form-label">Recipe Description</label>
          <textarea class="form-control"  name="recipe_description" ></textarea>
        </div>
        <div class="mb-3">
          <label for="exampleInputPassword1" class="form-label">Recipe Image</label>
          <input type="file" name="recipe_image" class="form-control"  id="exampleInputEmail1" aria-describedby="emailHelp">
        </div>


        <button type="submit" class="btn btn-success">Add Recipe</button>
      </form>

      <table class="table table-bordered border-primary">

        <thead>
          <tr>
         
            <th scope="col">#</th>
            <th scope="col">Recipe Name</th>
            <th scope="col">Recipe Description</th>
            <th scope="col">Recipe Image</th>
            <th scope="col">Action</th>
            
            
          </tr>
        </thead>
        <tbody>

          {% for recipe in Recipes %}
          <tr>
            <th scope="row">{{ forloop.counter }}</th>
            <td>{{ recipe.recipe_name }}</td>
            <td>{{ recipe.recipe_description }}</td>
            <td>
              <img src="/media/{{ recipe.recipe_image }}" style="height: 100px;" >
            </td>
            <td>
              <a onclick="confirmDelete('/delete_recipe/{{recipe.id}}/')" class="btn btn-danger">Delete</a>

              <script>
              function confirmDelete(url) {
                  if (confirm('Are you sure you want to delete this recipe?')) {
                      window.location.href = url; // Redirect to the delete URL if confirmed
                  }
              }
              </script>

            </td>

          </tr>

          {% endfor %}
          
        </tbody>
        
      </table>


</div>

{% endblock %}